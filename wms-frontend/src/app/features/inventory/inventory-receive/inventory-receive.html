<div class="max-w-5xl mx-auto space-y-8">

  <div class="bg-white shadow-lg rounded-xl overflow-hidden border border-slate-200">
    
    <div class="bg-amber-500 px-8 py-5 flex justify-between items-center border-b border-amber-600/20">
      <div>
        <h2 class="text-white font-bold text-xl flex items-center gap-2">
          <i class="bi bi-box-seam-fill"></i> Recepción de Carga
        </h2>
        <p class="text-amber-100 text-sm mt-1">Ingreso de stock al almacén físico (Inbound).</p>
      </div>
      <div class="hidden sm:block bg-white/20 backdrop-blur-sm rounded-lg p-2 text-white">
        <i class="bi bi-qr-code-scan text-2xl"></i>
      </div>
    </div>

    <div class="p-8">
      <form (ngSubmit)="onReceive()" class="space-y-6">
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
          
          <div class="relative group">
            <label class="block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1 group-focus-within:text-amber-600 transition-colors">
              Producto (SKU)
            </label>
            <div class="relative">
              <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                <i class="bi bi-upc-scan text-slate-400 group-focus-within:text-amber-500"></i>
              </div>
              <input type="text" [(ngModel)]="receptionData.productSku" name="sku" placeholder="Ej: NB-DELL-G15" required autofocus
                     class="pl-10 block w-full rounded-lg border-slate-300 bg-slate-50 focus:bg-white focus:border-amber-500 focus:ring-amber-500 sm:text-sm transition-all shadow-sm py-2.5 uppercase font-mono">
            </div>
          </div>

          <div class="relative group">
            <label class="block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1 group-focus-within:text-amber-600 transition-colors">
              Ubicación Destino
            </label>
            <div class="relative">
              <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                <i class="bi bi-geo-alt text-slate-400 group-focus-within:text-amber-500"></i>
              </div>
              <input type="text" [(ngModel)]="receptionData.locationCode" name="loc" placeholder="Ej: A-01-01-1" required
                     class="pl-10 block w-full rounded-lg border-slate-300 bg-slate-50 focus:bg-white focus:border-amber-500 focus:ring-amber-500 sm:text-sm transition-all shadow-sm py-2.5 uppercase font-mono">
            </div>
          </div>

        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
          
          <div>
            <label class="block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1">Cantidad</label>
            <input type="number" [(ngModel)]="receptionData.quantity" name="qty" placeholder="0" required min="1"
                   class="block w-full rounded-lg border-slate-300 shadow-sm focus:border-amber-500 focus:ring-amber-500 sm:text-sm text-center font-bold text-slate-700 py-2.5">
          </div>

          <div>
            <label class="block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1">Lote</label>
            <input type="text" [(ngModel)]="receptionData.batchNumber" name="batch" placeholder="BATCH-001" required
                   class="block w-full rounded-lg border-slate-300 shadow-sm focus:border-amber-500 focus:ring-amber-500 sm:text-sm py-2.5 uppercase">
          </div>

          <div>
            <label class="block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1">Vencimiento</label>
            <input type="date" [(ngModel)]="receptionData.expiryDate" name="expiry" required
                   class="block w-full rounded-lg border-slate-300 shadow-sm focus:border-amber-500 focus:ring-amber-500 sm:text-sm py-2.5 text-slate-600">
          </div>

        </div>

        <div class="pt-4 border-t border-slate-100 flex justify-end">
          <button type="submit" [disabled]="isSubmitting"
                  class="bg-slate-900 hover:bg-black text-white font-bold py-3 px-8 rounded-lg shadow-lg hover:shadow-xl transition-all transform hover:-translate-y-0.5 flex items-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed">
            <span *ngIf="isSubmitting" class="w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"></span>
            <i *ngIf="!isSubmitting" class="bi bi-check-lg text-lg"></i>
            <span>Generar Entrada</span>
          </button>
        </div>

      </form>
    </div>
  </div>

  <div *ngIf="generatedTicket" class="animate-scale-in">
    
    <div class="bg-white border-2 border-dashed border-slate-300 rounded-xl p-8 relative overflow-hidden group hover:border-indigo-300 transition-colors">
      
      <div class="absolute top-0 right-0 bg-emerald-500 text-white text-[10px] font-bold px-3 py-1 rounded-bl-lg shadow-sm">
        PROCESADO
      </div>

      <div class="flex flex-col md:flex-row gap-8 items-center">
        
        <div class="flex-1 text-center md:text-left border-b md:border-b-0 md:border-r border-slate-100 pb-6 md:pb-0 md:pr-8 w-full md:w-auto">
          <p class="text-xs font-bold text-slate-400 uppercase tracking-[0.2em] mb-2">License Plate Number</p>
          <div class="inline-block bg-slate-50 border border-slate-200 rounded-lg px-6 py-3 shadow-inner">
            <h2 class="text-3xl md:text-4xl font-mono font-black text-indigo-700 tracking-tighter select-all cursor-copy" title="Copiar">
              {{ generatedTicket.lpn }}
            </h2>
          </div>
          <div class="mt-4 flex justify-center md:justify-start gap-2">
            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-amber-100 text-amber-800 border border-amber-200">
              {{ generatedTicket.status }}
            </span>
          </div>
        </div>

        <div class="flex-1 w-full">
          <h4 class="text-sm font-bold text-slate-900 uppercase border-b border-slate-100 pb-2 mb-3">Detalle de Ingreso</h4>
          
          <div class="grid grid-cols-2 gap-y-4 gap-x-2 text-sm">
            <div>
              <span class="block text-xs text-slate-400">Producto</span>
              <span class="font-bold text-slate-700">{{ generatedTicket.productSku }}</span>
            </div>
            <div>
              <span class="block text-xs text-slate-400">Cantidad</span>
              <span class="font-bold text-slate-700">{{ generatedTicket.quantity }} un.</span>
            </div>
            <div>
              <span class="block text-xs text-slate-400">Ubicación</span>
              <span class="font-bold text-slate-700 flex items-center gap-1">
                <i class="bi bi-geo-alt-fill text-slate-300"></i> {{ generatedTicket.locationCode }}
              </span>
            </div>
            <div>
              <span class="block text-xs text-slate-400">Vencimiento</span>
              <span class="font-bold text-slate-700">{{ generatedTicket.expiryDate | date:'dd/MM/yy' }}</span>
            </div>
          </div>
        </div>

      </div>

      <div class="mt-8 pt-6 border-t border-slate-100 flex justify-center md:justify-end gap-3">
        <button class="text-slate-500 hover:text-indigo-600 text-sm font-medium flex items-center gap-2 px-3 py-2 rounded hover:bg-slate-50 transition-colors">
          <i class="bi bi-printer"></i> Imprimir Etiqueta
        </button>
        <button (click)="resetForm()" class="bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-bold px-5 py-2 rounded-lg shadow transition-colors">
          Nueva Recepción
        </button>
      </div>

    </div>
  </div>

</div>